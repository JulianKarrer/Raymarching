<!DOCTYPE html>
<html>
  <head>
    <title>Raymarching</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="prism.css" />
  </head>
  <body class="impress-not-supported" oncontextmenu="return false;">
    <script src="glslcanvas.js"></script>
    <script src="prism.js"></script>
    <div id="impress">
      <div id="title" class="step">
        <h1>Raymarching</h1>
      </div>

      <div id="gliederung" class="step" data-x="1000" data-y="1500" data-z="-500" data-rotate-y="90">
        <div style="width: 1000px">
          <h1>Gliederung</h1>
          <li>Motivation</li>
          <li>Signed Distance Functions</li>
          <li>Raymarching</li>
          <li>Constructive Solid Geometry</li>
          <li>Fraktale</li>
          <li>Fazit</li>
        </div>
      </div>

      <div id="mandelbulb" class="step centred" 
      data-x="-1000" data-y="3500" data-z="500"
      data-rotate-y="90"
      >
        <h1>Mandelbulb</h1>
        <canvas class="glslCanvas" data-fragment-url="shader.frag" width="600" height="500"></canvas>
      </div>

      <div id ="sdfbasics" class="step"
        data-x="1000" data-y="5500" data-z="-500" data-rotate-y="90">
        <h1 class="bigh1-uncentred">Signed Distance Functions</h1>
<pre><code class="language-glsl">vec2 centre = vec2(0.0, 0.0);
float radius = 10.0;

float D_sphere(vec2 p){
  return length(p - centre) - radius;
}
</code></pre>
<pre><code class="language-glsl">vec2 centre = vec2(0.0, 0.0);
vec2 width = vec2(10.0, 20.0);

float D_box(vec2 p){
  // translate p -> box is around the origin
  let p_ = p - centre;

  // compute offset of abs(p) -> p is in the positive quadrant
  vec2 offset = abs(p_) - width;

  float if_outside_box = length(max(offset, vec3(0.0)));
  float if_inside_box = max(offset.x, max(offset.y, offset.z));

  return if_outside_box + min(0.0, if_inside_box);
}
</code></pre>
      </div>

      <div id="sdf-visualizer" class="step centred" 
      data-x="-1000" data-y="7500" data-z="-500" data-rotate-y="90">
        <h1 class="bigh1">Signed Distance Functions</h1>
        <canvas id="raymarch-visualize" width="1080" height="720"></canvas>
      </div>
      <div id="sdfray-visualizer" class="step centred" 
      data-x="-1000" data-y="7500" data-z="-500" data-rotate-y="90">
      </div>

    </div>

    <img id="eyecon" src="eyecon.png" style="display: none;"/>
    <div class="impress-progressbar"><div></div></div>
    <div class="impress-progress"></div>
    <script src="impress.js"></script>
    <script src="raymarch-visualize.js"></script>
    <script>impress().init()</script>
  </body>
</html>